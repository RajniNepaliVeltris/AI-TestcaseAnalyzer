<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI-TestcaseAnalyzer Business Flow</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 10px;
            font-size: 2.5em;
        }
        .subtitle {
            text-align: center;
            color: #7f8c8d;
            margin-bottom: 30px;
            font-size: 1.2em;
        }
        .diagram-container {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            border: 1px solid #e9ecef;
        }
        .info-box {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }
        .legend {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .legend-item {
            display: flex;
            align-items: center;
            padding: 10px;
            border-radius: 6px;
            font-size: 0.9em;
        }
        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 3px;
            margin-right: 10px;
        }
        .footer {
            text-align: center;
            margin-top: 30px;
            color: #7f8c8d;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ü§ñ AI-TestcaseAnalyzer</h1>
        <p class="subtitle">Business-Level Flow Diagram</p>

        <div class="info-box">
            <strong>üìä Overview:</strong> This interactive diagram shows the complete business flow of the AI-TestcaseAnalyzer framework,
            from configuration to report generation with AI-powered failure analysis.
        </div>

        <div class="legend">
            <div class="legend-item" style="background: #e1f5fe; border: 1px solid #01579b;">
                <div class="legend-color" style="background: #e1f5fe;"></div>
                <strong>Start/End</strong> - Framework lifecycle
            </div>
            <div class="legend-item" style="background: #f3e5f5; border: 1px solid #4a148c;">
                <div class="legend-color" style="background: #f3e5f5;"></div>
                <strong>Configuration</strong> - Setup & validation
            </div>
            <div class="legend-item" style="background: #e8f5e8; border: 1px solid #1b5e20;">
                <div class="legend-color" style="background: #e8f5e8;"></div>
                <strong>Test Execution</strong> - Playwright tests
            </div>
            <div class="legend-item" style="background: #fff3e0; border: 1px solid #e65100;">
                <div class="legend-color" style="background: #fff3e0;"></div>
                <strong>AI Analysis</strong> - Failure analysis
            </div>
            <div class="legend-item" style="background: #fce4ec; border: 1px solid #880e4f;">
                <div class="legend-color" style="background: #fce4ec;"></div>
                <strong>Reporting</strong> - Results & notifications
            </div>
            <div class="legend-item" style="background: #ffebee; border: 1px solid #c62828;">
                <div class="legend-color" style="background: #ffebee;"></div>
                <strong>Error Handling</strong> - Failure scenarios
            </div>
        </div>

        <div class="diagram-container">
            <div class="mermaid">
flowchart TD
    %% Start Node
    START([üöÄ Test Execution Begins])

    %% Configuration Phase
    CONFIG[‚öôÔ∏è Configuration Setup]
    CONFIG --> ENV_CHECK{Environment<br/>Configured?}
    ENV_CHECK -->|Yes| API_READY[‚úÖ AI Providers Ready]
    ENV_CHECK -->|No| CONFIG_ERROR[‚ùå Configuration Error<br/>Missing API Keys]

    %% Test Execution Phase
    API_READY --> TEST_EXEC[üé≠ Playwright Test Execution]
    TEST_EXEC --> TEST_RESULTS[Test Results<br/>Generated]

    %% Analysis Phase
    TEST_RESULTS --> FAILURE_CHECK{Tests<br/>Passed?}

    FAILURE_CHECK -->|‚úÖ All Passed| SUCCESS_REPORT[üìä Success Report<br/>Generated]
    FAILURE_CHECK -->|‚ùå Some Failed| FAILURE_ANALYSIS[üîç AI Failure Analysis]

    %% AI Analysis Flow
    FAILURE_ANALYSIS --> PROVIDER_SELECT{AI Provider<br/>Available?}
    PROVIDER_SELECT -->|OpenAI| OPENAI_ANALYZE[ü§ñ OpenAI Analysis]
    PROVIDER_SELECT -->|TogetherAI| TOGETHER_ANALYZE[üß† TogetherAI Analysis]
    PROVIDER_SELECT -->|None| FALLBACK_ANALYZE[üìã Rule-based<br/>Fallback Analysis]

    %% Analysis Results
    OPENAI_ANALYZE --> ANALYSIS_COMPLETE
    TOGETHER_ANALYZE --> ANALYSIS_COMPLETE
    FALLBACK_ANALYZE --> ANALYSIS_COMPLETE

    ANALYSIS_COMPLETE[üìù Analysis Complete] --> CLUSTERING

    %% Clustering Phase
    CLUSTERING[üîó Failure Clustering<br/>Pattern Recognition] --> CLUSTER_RESULTS

    %% Report Generation
    CLUSTER_RESULTS[üìà Clustered Results] --> REPORT_GEN[üìÑ HTML Report<br/>Generation]

    REPORT_GEN --> REPORT_READY[üéØ AI Analysis Report<br/>Ready]

    %% Notification Phase
    REPORT_READY --> NOTIFY_CHECK{Slack<br/>Configured?}
    NOTIFY_CHECK -->|Yes| SLACK_NOTIFY[üì¢ Slack Notification<br/>Sent]
    NOTIFY_CHECK -->|No| COMPLETE

    SLACK_NOTIFY --> COMPLETE
    SUCCESS_REPORT --> COMPLETE

    %% End Node
    COMPLETE([‚úÖ Framework Execution Complete])

    %% Error Handling
    CONFIG_ERROR --> END_ERROR([‚ùå Setup Failed])
    TEST_EXEC --> TEST_ERROR[Test Execution<br/>Error]
    TEST_ERROR --> END_ERROR

    %% Styling
    classDef startClass fill:#e1f5fe,stroke:#01579b,stroke-width:2px
    classDef configClass fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    classDef testClass fill:#e8f5e8,stroke:#1b5e20,stroke-width:2px
    classDef aiClass fill:#fff3e0,stroke:#e65100,stroke-width:2px
    classDef reportClass fill:#fce4ec,stroke:#880e4f,stroke-width:2px
    classDef successClass fill:#e8f5e8,stroke:#2e7d32,stroke-width:2px
    classDef errorClass fill:#ffebee,stroke:#c62828,stroke-width:2px

    class START,COMPLETE startClass
    class CONFIG,ENV_CHECK,API_READY configClass
    class TEST_EXEC,TEST_RESULTS,FAILURE_CHECK testClass
    class FAILURE_ANALYSIS,PROVIDER_SELECT,OPENAI_ANALYZE,TOGETHER_ANALYZE,FALLBACK_ANALYZE,ANALYSIS_COMPLETE,CLUSTERING,CLUSTER_RESULTS aiClass
    class REPORT_GEN,REPORT_READY,NOTIFY_CHECK,SLACK_NOTIFY reportClass
    class SUCCESS_REPORT successClass
    class CONFIG_ERROR,TEST_ERROR,END_ERROR errorClass
            </div>
        </div>

        <div class="info-box">
            <strong>üîÑ Flow Explanation:</strong><br>
            1. <strong>Configuration</strong> ‚Üí Validate environment and AI providers<br>
            2. <strong>Test Execution</strong> ‚Üí Run Playwright tests with self-healing<br>
            3. <strong>AI Analysis</strong> ‚Üí Analyze failures using OpenAI/TogetherAI or fallback<br>
            4. <strong>Clustering</strong> ‚Üí Group similar failures for pattern recognition<br>
            5. <strong>Reporting</strong> ‚Üí Generate comprehensive HTML reports<br>
            6. <strong>Notification</strong> ‚Üí Optional Slack notifications for teams
        </div>

        <div class="footer">
            <p>üöÄ <strong>AI-TestcaseAnalyzer v1.0.0</strong> - Transform test failures into actionable insights</p>
            <p>Generated on October 9, 2025</p>
        </div>
    </div>

    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true,
                curve: 'basis'
            },
            securityLevel: 'loose'
        });
    </script>
</body>
</html>